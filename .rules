# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a Statamic CMS addon (`el-schneider/statamic-maintenance-mode`) that enables maintenance mode with page whitelisting. When active, visitors see a maintenance page while users with CP access can browse normally.

**Statamic Compatibility:** 5.0+ and 6.0+

## Common Commands

```bash
# Run tests
./vendor/bin/pest

# Run a single test file
./vendor/bin/pest tests/Feature/MaintenanceModeTest.php

# Run tests with filter
./vendor/bin/pest --filter="test name"

# Code style (Laravel preset with strict types)
./vendor/bin/pint

# Check code style without fixing
./vendor/bin/pint --test
```

## Testing

Uses Pest 4.0 with Statamic's `AddonTestCase` (via Orchestra Testbench 10.0). Tests run against an SQLite in-memory database configured in `phpunit.xml`. The base `TestCase` extends `Statamic\Testing\AddonTestCase` and configures flat-file users repository.

## Manual Testing

A full Statamic instance is available for manual testing at `../statamic-maintenance-mode-test/`.

**URL:** http://statamic-maintenance-mode-test.test/ (served via Laravel Herd)

**Super Admin Credentials:**
- Email: `claude@claude.com`
- Password: `claude`

Use the Playwright MCP tools for browser-based manual testing against this instance.
